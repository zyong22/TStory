{{>/layout/main-header}}

<div class="container">
    <input id="postId" type="hidden" value="1" />
    <input id="pageOwnerId" type="hidden" value="1" />
    <input id="my-loveId" type="hidden" value="1">

    <div class="my_post_detail_title">
        <h2>{{detail.post.title}}</h2>
    </div>

    <!-- 수정 폼 추가: 기본적으로 숨김 -->
    <div id="edit-form" style="display: none;" class="my_mt_md_1">
        <div class="form-group">
            <label for="edit-title">Title</label>
            <input type="text" id="edit-title" class="form-control" value="{{detail.post.title}}">
        </div>
        <div class="form-group">
            <label for="edit-content">Content</label>
            <textarea id="edit-content" class="form-control">{{detail.post.content}}</textarea>
        </div>
        <button id="btn-save" class="btn btn-success">저장</button>
        <button id="btn-cancel" class="btn btn-secondary">취소</button>
    </div>

    <hr />

    <div class="my_post_detail_content">
        {{{detail.post.content}}}
    </div>

    <div class="my_post_info_box d-flex">
        <div class="my_post_info">
            <i class="fa-solid fa-heart my_fake_like my_mr_sm_1" id="heart-1"></i>
            by <b>유저네임</b> <span class="my_text_body_sm">날짜</span>
        </div>
    </div>

    <div class="my_mt_md_1">
        <a class="btn btn-outline-success" id="btn-edit" href="#">수정</a>
        <button id="btn-delete" class="btn btn-outline-danger">삭제</button>
    </div>

    <br />
</div>

<script>
    $(document).ready(function() {
        // 수정 버튼 클릭 시 폼 표시
        $('#btn-edit').click(function(e) {
            e.preventDefault();
            $('#edit-form').show();
            $('.my_post_detail_content').hide(); // 본문 숨김
            $('.my_post_detail_title').hide();   // 제목 숨김
            $(this).hide(); // 수정 버튼 숨김
        });

        // 취소 버튼 클릭 시 폼 숨기고 기존 내용 복원
        $('#btn-cancel').click(function(e) {
            e.preventDefault();
            $('#edit-form').hide();
            $('.my_post_detail_content').show(); // 본문 보이기
            $('.my_post_detail_title').show();   // 제목 보이기
            $('#btn-edit').show(); // 수정 버튼 보이기
        });

        // 저장 버튼 클릭 시 변경사항 저장
        $('#btn-save').click(function(e) {
            e.preventDefault();
            var newTitle = $('#edit-title').val();
            var newContent = $('#edit-content').val();

            // 여기에 서버로 변경 사항을 전송하는 AJAX 요청 추가

            // 성공적으로 저장된 경우 UI 업데이트
            $('.my_post_detail_title h2').text(newTitle);
            $('.my_post_detail_content').html(newContent); // innerHTML 사용하여 HTML content 반영
            $('#edit-form').hide();
            $('.my_post_detail_content').show(); // 본문 보이기
            $('.my_post_detail_title').show();   // 제목 보이기
            $('#btn-edit').show(); // 수정 버튼 보이기
        });
    });
</script>


{{>/layout/footer}}

